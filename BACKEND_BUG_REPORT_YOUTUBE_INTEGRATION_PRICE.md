# üêõ Bug Report: YouTube Integration Price Not Saving

## üìã **–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã**

–ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –∏–∑–º–µ–Ω–∏—Ç—å —Ü–µ–Ω—É –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ YouTube –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ —á–µ—Ä–µ–∑ —ç–Ω–¥–ø–æ–∏–Ω—Ç `/admin/blogger/social-price/{bloggerId}` –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö, –Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞ —É—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç —Å–µ—Ä–≤–µ—Ä–∞ (204 No Content).

## üîç **–î–µ—Ç–∞–ª–∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è**

### **–®–∞–≥–∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è:**
1. –û—Ç–∫—Ä—ã—Ç—å –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å: `http://localhost:8082/admin`
2. –í–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
3. –ü–µ—Ä–µ–π—Ç–∏ –∫ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –±–ª–æ–≥–µ—Ä–∞: `/admin/blogger/_agentgirl_/edit`
4. –û—Ç–∫—Ä—ã—Ç—å —Ç–∞–± **YouTube**
5. –ò–∑–º–µ–Ω–∏—Ç—å —Ü–µ–Ω—É –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å 0 –Ω–∞ 999)
6. –ù–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"

### **–û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**
- –¶–µ–Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –¥–æ–ª–∂–Ω–∞ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å—Å—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- –ü–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ

### **–§–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**
- –°–µ—Ä–≤–µ—Ä –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —É—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç (204 No Content)
- –¶–µ–Ω–∞ –æ—Å—Ç–∞–µ—Ç—Å—è 0, –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è

## üìä **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏**

### **API –∑–∞–ø—Ä–æ—Å:**
```http
PUT /api/admin/blogger/social-price/1111
Content-Type: application/json
Authorization: Bearer <admin_token>

{
  "type": "YOUTUBE",
  "integrationPrice": 999
}
```

### **–û—Ç–≤–µ—Ç —Å–µ—Ä–≤–µ—Ä–∞:**
```http
HTTP/1.1 204 No Content
```

### **–õ–æ–≥–∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞:**
```
üíæ YouTube price save clicked, value: 999
üí∞ Processing price changes: {youtube_integration_price: '999'}
üîç mapPlatformPricesToUpdate: {platform: 'YOUTUBE', ...}
‚úÖ Added integrationPrice: 999
üì§ Final DTO: {dto: {type: 'YOUTUBE', integrationPrice: 999}, hasChanges: true}
üöÄ Updating YOUTUBE prices: {type: 'YOUTUBE', integrationPrice: 999}
üåê adminUpdateBloggerSocialPrice API call: {url: '/admin/blogger/social-price/1111', method: 'PUT', data: {...}}
üåê API Request Debug: {url: '/api/admin/blogger/social-price/1111', method: 'PUT', headers: {...}, body: '{"type":"YOUTUBE","integrationPrice":999}', skipAuth: false, ...}
üì• API Response Debug: {endpoint: '/admin/blogger/social-price/1111', status: 204, statusText: 'No Content', headers: {...}, ok: true}
‚úÖ 204 No Content response for: /admin/blogger/social-price/1111
‚úÖ adminUpdateBloggerSocialPrice API response: undefined
‚úÖ YOUTUBE prices updated successfully
```

## üîß **–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã**

### **1. –ü—Ä–æ–±–ª–µ–º–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö**
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –î–∞–Ω–Ω—ã–µ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü–µ —Ü–µ–Ω —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–µ—Ç–µ–π
- **–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
  - –û—à–∏–±–∫–∞ –≤ SQL –∑–∞–ø—Ä–æ—Å–µ UPDATE
  - –ü—Ä–æ–±–ª–µ–º–∞ —Å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏ (rollback)
  - –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã
  - –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∑–∞–ø–∏—Å–∏ –¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ –±–ª–æ–≥–µ—Ä–∞ –∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã

### **2. –ü—Ä–æ–±–ª–µ–º–∞ —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π**
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –°–µ—Ä–≤–µ—Ä –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∑–∞–ø—Ä–æ—Å, –Ω–æ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏–∑-–∑–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- **–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
  - –í–∞–ª–∏–¥–∞—Ü–∏—è `integrationPrice` –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç
  - –ü—Ä–æ–±–ª–µ–º–∞ —Å —Ç–∏–ø–æ–º –¥–∞–Ω–Ω—ã—Ö (number vs string)
  - –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ –∑–Ω–∞—á–µ–Ω–∏—è —Ü–µ–Ω
  - –ü—Ä–æ–±–ª–µ–º–∞ —Å –ø–æ–ª–µ–º `type: "YOUTUBE"`

### **3. –ü—Ä–æ–±–ª–µ–º–∞ —Å –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞**
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –ê–¥–º–∏–Ω –Ω–µ –∏–º–µ–µ—Ç –ø—Ä–∞–≤ –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ü–µ–Ω
- **–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
  - –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–µ–π
  - –ü—Ä–æ–±–ª–µ–º–∞ —Å —Ç–æ–∫–µ–Ω–æ–º –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
  - –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ —É—Ä–æ–≤–Ω–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### **4. –ü—Ä–æ–±–ª–µ–º–∞ —Å –º–∞–ø–ø–∏–Ω–≥–æ–º –¥–∞–Ω–Ω—ã—Ö**
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –î–∞–Ω–Ω—ã–µ –Ω–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –º–∞–ø–ø—è—Ç—Å—è –≤ –º–æ–¥–µ–ª—å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- **–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
  - –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø–æ–ª–µ –≤ DTO
  - –ü—Ä–æ–±–ª–µ–º–∞ —Å –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ–º —Ç–∏–ø–æ–≤
  - –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø–æ–ª—è `integrationPrice` –≤ –º–æ–¥–µ–ª–∏

### **5. –ü—Ä–æ–±–ª–µ–º–∞ —Å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º**
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è, –Ω–æ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∏–∑-–∑–∞ –∫–µ—à–∞
- **–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
  - –ö–µ—à –Ω–µ –∏–Ω–≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç—Å—è –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
  - –ü—Ä–æ–±–ª–µ–º–∞ —Å Redis/Memcached
  - –ö–µ—à –Ω–∞ —É—Ä–æ–≤–Ω–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### **6. –ü—Ä–æ–±–ª–µ–º–∞ —Å –ª–æ–≥–∏–∫–æ–π –±–∏–∑–Ω–µ—Å–∞**
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –ï—Å—Ç—å –±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞, –∫–æ—Ç–æ—Ä—ã–µ –±–ª–æ–∫–∏—Ä—É—é—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
- **–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
  - –ë–ª–æ–≥–µ—Ä –Ω–µ –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω
  - –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ YouTube –Ω–µ –∞–∫—Ç–∏–≤–Ω–∞
  - –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ —Å—Ç–∞—Ç—É—Å—É –±–ª–æ–≥–µ—Ä–∞

## üõ†Ô∏è **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è**

### **1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –±—ç–∫–µ–Ω–¥–∞**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –∑–∞–ø—Ä–æ—Å–∞
tail -f /var/log/backend.log | grep "social-price"
```

### **2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö**
```sql
-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –¥–ª—è –±–ª–æ–≥–µ—Ä–∞
SELECT * FROM blogger_social_prices 
WHERE blogger_id = 1111 AND type = 'YOUTUBE';

-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞–±–ª–∏—Ü—ã
DESCRIBE blogger_social_prices;

-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
SHOW GRANTS FOR 'backend_user'@'localhost';
```

### **3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é**
- –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —ç–Ω–¥–ø–æ–∏–Ω—Ç `/admin/blogger/social-price/{bloggerId}` —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ö–µ–º—É `BloggerUpdateSocialPriceInputDto`
- –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –ø–æ–ª–µ `integrationPrice` –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è

### **4. –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –±—ç–∫–µ–Ω–¥–µ**
```typescript
// –í –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–µ –¥–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
@Put('social-price/:bloggerId')
async updateBloggerSocialPrice(
  @Param('bloggerId') bloggerId: number,
  @Body() data: BloggerUpdateSocialPriceInputDto,
) {
  console.log('üîß Backend: Updating social price', {
    bloggerId,
    data,
    timestamp: new Date().toISOString()
  });
  
  // ... –ª–æ–≥–∏–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
  
  console.log('‚úÖ Backend: Social price updated successfully');
}
```

### **5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é**
```typescript
// –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–æ—Ö–æ–¥–∏—Ç
export class BloggerUpdateSocialPriceInputDto {
  @IsEnum(['YOUTUBE', 'INSTAGRAM', 'TELEGRAM', 'TIKTOK'])
  type: string;

  @IsOptional()
  @IsNumber()
  @Min(0)
  postPrice?: number;

  @IsOptional()
  @IsNumber()
  @Min(0)
  storiesPrice?: number;

  @IsOptional()
  @IsNumber()
  @Min(0)
  integrationPrice?: number; // ‚Üê –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —ç—Ç–æ –ø–æ–ª–µ –µ—Å—Ç—å
}
```

## üìù **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è**

### **–û–∫—Ä—É–∂–µ–Ω–∏–µ:**
- Frontend: React + TypeScript + Vite
- Backend: Node.js + NestJS (–ø—Ä–µ–¥–ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ)
- Database: PostgreSQL (–ø—Ä–µ–¥–ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ)
- Admin ID: 1111
- Blogger: _agentgirl_

### **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ **–í—ã—Å–æ–∫–∏–π**
- –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
- –í–ª–∏—è–µ—Ç –Ω–∞ –±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å—ã

### **–°—Ç–∞—Ç—É—Å:** üü° **–í —Ä–∞–±–æ—Ç–µ**
- –§—Ä–æ–Ω—Ç–µ–Ω–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –ü—Ä–æ–±–ª–µ–º–∞ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –±—ç–∫–µ–Ω–¥–∞

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** $(date)  
**–ê–≤—Ç–æ—Ä:** Frontend Developer  
**–¢–µ–≥–∏:** `backend`, `admin`, `youtube`, `integration-price`, `bug`

