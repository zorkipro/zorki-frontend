<!doctype html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    <!-- –ë–∞–∑–æ–≤—ã–µ –º–µ—Ç–∞-—Ç–µ–≥–∏ (–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –º–µ—Ç–∞-—Ç–µ–≥–∏ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ SEOHead –∫–æ–º–ø–æ–Ω–µ–Ω—Ç) -->
    <title>Zorki.pro - –†–µ–π—Ç–∏–Ω–≥ –±–ª–æ–≥–µ—Ä–æ–≤ –ë–µ–ª–∞—Ä—É—Å–∏</title>
    <meta name="description" content="–ö–∞—Ç–∞–ª–æ–≥ –±–ª–æ–≥–µ—Ä–æ–≤ –ë–µ–ª–∞—Ä—É—Å–∏ –¥–ª—è —Å–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–∞ —Å –±—Ä–µ–Ω–¥–∞–º–∏. Instagram, TikTok, YouTube, Telegram. –ü–æ–∏—Å–∫ –ø–æ —Ç–µ–º–∞—Ç–∏–∫–µ, –ø–æ–¥–ø–∏—Å—á–∏–∫–∞–º –∏ —Ü–µ–Ω–∞–º." />
    
    <!-- Theme -->
    <meta name="theme-color" content="#000000" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-mobile-web-app-title" content="Zorki.pro" />
    
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-KVDLF2WK');</script>
    <!-- End Google Tag Manager -->
    
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-E29M3WBV13"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-E29M3WBV13');
    </script>
    
    <!-- Yandex.Metrika counter -->
    <script type="text/javascript">
        (function(m,e,t,r,i,k,a){
            m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
            m[i].l=1*new Date();
            for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
            k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)
        })(window, document,'script','https://mc.yandex.ru/metrika/tag.js?id=105592951', 'ym');

        ym(105592951, 'init', {ssr:true, webvisor:true, clickmap:true, ecommerce:"dataLayer", accurateTrackBounce:true, trackLinks:true});
    </script>
    <!-- /Yandex.Metrika counter -->
  </head>
  <body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KVDLF2WK"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    
    <!-- Yandex.Metrika counter (noscript) -->
    <noscript><div><img src="https://mc.yandex.ru/watch/105592951" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
    <!-- /Yandex.Metrika counter (noscript) -->
    <div id="root"></div>
    <script>
      // –†–∞–Ω–Ω—è—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞ —Å Supabase –¥–æ–º–µ–Ω–∞ (–≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –¥–æ –∑–∞–≥—Ä—É–∑–∫–∏ React)
      (function() {
        try {
          const supabaseUrl = 'https://db.zorki.pro';
          const currentHost = window.location.hostname;
          const supabaseHost = supabaseUrl ? new URL(supabaseUrl).hostname : null;
          const hasHashParams = window.location.hash.includes('access_token');
          
          if (supabaseHost && currentHost === supabaseHost && hasHashParams) {
            // –ü—ã—Ç–∞–µ–º—Å—è –ø–æ–ª—É—á–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–π origin
            let frontendOrigin = localStorage.getItem('oauth_redirect_origin') || 
                               sessionStorage.getItem('oauth_redirect_origin');
            
            if (!frontendOrigin) {
              // Fallback: –æ–ø—Ä–µ–¥–µ–ª—è–µ–º –ø–æ API URL –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
              const isDev = window.location.hostname === 'localhost' || window.location.hostname.includes('localhost');
              frontendOrigin = isDev ? 'http://localhost:8085' : 'https://zorki.pro';
            }
            
            frontendOrigin = frontendOrigin.replace(/\/$/, '');
            const redirectUrl = frontendOrigin + window.location.pathname + window.location.search + window.location.hash;
            
            console.log('üîÑ HTML redirect:', { from: window.location.href, to: redirectUrl });
            window.location.replace(redirectUrl);
          }
        } catch (e) {
          console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞:', e);
        }
      })();
    </script>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
